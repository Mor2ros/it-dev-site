import{w as I,a as l,o as a}from"./chunk-QMGIS6GS-kYHhZtYO.js";import{O as E,V as h,D as O,T as R,A as B,B as M,a as q,Z as F,U as Z,S as _,b as V,P as G,R as H,d as J,L as z,e as K,f as Q,C as k}from"./index-CDRViMVc.js";const c="/api",j={services:["title","description","icon"],testimonials:["author","company","quote","photo"],team:["name","role","photo"],contacts:["name","email","phone","company","message","timestamp"]},W="admin",X="admin123",Y=[{name:"Code",label:"Код"},{name:"Cloud",label:"Облако"},{name:"Smartphone",label:"Смартфон"},{name:"Laptop",label:"Ноутбук"},{name:"Settings",label:"Настройки"},{name:"Rocket",label:"Ракета"},{name:"Palette",label:"Палитра"},{name:"Brain",label:"Мозг"},{name:"ShieldCheck",label:"Щит"},{name:"UserPlus",label:"Пользователь"},{name:"Zap",label:"Молния"},{name:"Target",label:"Цель"},{name:"Briefcase",label:"Портфель"},{name:"Award",label:"Награда"},{name:"TrendingUp",label:"График"},{name:"DollarSign",label:"Доллар"}];function ee(v){return{Code:k,Cloud:Q,Smartphone:K,Laptop:z,Settings:J,Rocket:H,Palette:G,Brain:V,ShieldCheck:_,UserPlus:Z,Zap:F,Target:q,Briefcase:M,Award:B,TrendingUp:R,DollarSign:O}[v]||k}const se=I(function(){const[d,N]=l.useState(!1),[x,P]=l.useState(""),[g,$]=l.useState(""),[w,m]=l.useState({services:[],testimonials:[],team:[],contacts:[]}),[n,b]=l.useState("services"),[A,S]=l.useState(!1),[C,p]=l.useState(!1),[i,y]=l.useState({});l.useEffect(()=>{d&&(S(!0),Promise.all([fetch(`${c}/services`).then(e=>e.json()),fetch(`${c}/testimonials`).then(e=>e.json()),fetch(`${c}/team`).then(e=>e.json()),fetch(`${c}/contacts`).then(e=>e.json())]).then(([e,t,s,r])=>{m({services:e,testimonials:t,team:s,contacts:r}),S(!1)}))},[d]);function T(e){e.preventDefault();const t={};if(x.trim()||(t.login="Введите логин"),g.trim()||(t.pass="Введите пароль"),Object.keys(t).length>0){y(t);return}x===W&&g===X?(N(!0),y({})):y({common:"Неверный логин или пароль"})}function u(e,t,s,r){m(o=>({...o,[e]:o[e].map(f=>f.id===t?{...f,[s]:r}:f)}))}function D(e){m(t=>({...t,[e]:[...t[e],{id:Date.now(),...Object.fromEntries(j[e].map(s=>[s,""]))}]}))}function L(e,t){confirm("Вы уверены, что хотите удалить этот элемент?")&&(m(s=>({...s,[e]:s[e].filter(r=>r.id!==t)})),h.success("Элемент удален"))}function U(){const e=w[n],t=j[n];for(let s=0;s<e.length;s++){const r=e[s];for(const o of t)if(o!=="photo"&&o!=="timestamp"&&!String(r[o]||"").trim()){h.error(`Пожалуйста, заполните поле "${o}" в элементе ${s+1}`);return}}p(!0),fetch(`${c}/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(s=>{if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()}).then(()=>{p(!1),h.success("Данные успешно сохранены!")}).catch(s=>{console.error("Ошибка сохранения:",s),p(!1),h.error(`Ошибка сохранения: ${s.message}`)})}return d?a.jsxs("div",{className:"min-h-screen bg-gray-900",children:[a.jsx(E,{position:"top-right"}),a.jsxs("header",{className:"bg-gray-950 text-blue-400 py-4 px-8 flex items-center justify-between shadow-lg",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Админ-панель"}),a.jsx("button",{onClick:()=>N(!1),className:"bg-blue-700 hover:bg-blue-800 text-white px-4 py-2 rounded font-bold transition",children:"Выйти"})]}),a.jsxs("nav",{className:"flex gap-4 px-8 py-4 bg-gray-800 border-b border-gray-700",children:[a.jsx("button",{onClick:()=>b("services"),className:n==="services"?"font-bold text-blue-400 underline":"text-gray-300",children:"Услуги"}),a.jsx("button",{onClick:()=>b("testimonials"),className:n==="testimonials"?"font-bold text-blue-400 underline":"text-gray-300",children:"Отзывы"}),a.jsx("button",{onClick:()=>b("team"),className:n==="team"?"font-bold text-blue-400 underline":"text-gray-300",children:"Команда"}),a.jsx("button",{onClick:()=>b("contacts"),className:n==="contacts"?"font-bold text-blue-400 underline":"text-gray-300",children:"Контакты"})]}),a.jsxs("main",{className:"p-8",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-300",children:n==="services"?"Услуги":n==="testimonials"?"Отзывы":n==="team"?"Команда":"Контакты"}),a.jsx("button",{onClick:()=>D(n),className:"mb-4 bg-green-700 hover:bg-green-800 text-white px-4 py-2 rounded transition",children:"Добавить"}),a.jsx("button",{onClick:U,disabled:C,className:"mb-4 ml-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded transition disabled:opacity-50 flex items-center gap-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Сохраняю..."]}):"Сохранить"}),A?a.jsx("div",{className:"text-gray-400",children:"Загрузка..."}):a.jsx("div",{className:"space-y-4",children:w[n].map(e=>a.jsxs("div",{className:"bg-gray-800 p-4 rounded shadow flex flex-col gap-2 border border-gray-700",children:[j[n].map(t=>t==="description"||t==="quote"?a.jsx("textarea",{value:e[t],onChange:s=>u(n,e.id,t,s.target.value),placeholder:t==="description"?"Описание":"Отзыв",className:"border border-gray-700 bg-gray-900 text-white px-2 py-1 rounded mb-2"},t):t==="photo"?a.jsx("input",{value:e[t],onChange:s=>u(n,e.id,t,s.target.value),placeholder:"URL фото (необязательно)",className:"border border-gray-700 bg-gray-900 text-white px-2 py-1 rounded mb-2",type:"url"},t):t==="icon"&&n==="services"?a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Иконка:"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:Y.map(s=>{const r=ee(s.name),o=e[t]===s.name;return a.jsx("button",{type:"button",onClick:()=>u(n,e.id,t,s.name),className:`p-2 rounded border-2 transition-all ${o?"border-blue-400 bg-blue-900 bg-opacity-30":"border-gray-600 hover:border-gray-500 bg-gray-700"}`,title:s.label,children:a.jsx(r,{className:"w-6 h-6 text-blue-400"})},s.name)})})]},t):a.jsx("input",{value:e[t],onChange:s=>u(n,e.id,t,s.target.value),placeholder:t==="title"?"Название услуги":t==="author"?"Автор":t==="company"?"Компания":t==="name"?"Имя":t==="role"?"Роль":t,className:"border border-gray-700 bg-gray-900 text-white px-2 py-1 rounded mb-2"},t)),a.jsx("button",{onClick:()=>L(n,e.id),className:"mt-2 bg-red-700 hover:bg-red-800 text-white px-3 py-1 rounded self-end transition",children:"Удалить"})]},e.id))})]})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:a.jsxs("form",{onSubmit:T,className:"bg-gray-800 p-8 rounded shadow-md w-full max-w-xs border border-gray-700",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-blue-400",children:"Вход в админ-панель"}),a.jsx("input",{type:"text",placeholder:"Логин",value:x,onChange:e=>P(e.target.value),className:`mb-2 w-full px-3 py-2 border ${i.login?"border-red-500":"border-gray-700"} rounded bg-gray-900 text-white`}),i.login&&a.jsx("div",{className:"text-red-400 text-xs mb-2",children:i.login}),a.jsx("input",{type:"password",placeholder:"Пароль",value:g,onChange:e=>$(e.target.value),className:`mb-2 w-full px-3 py-2 border ${i.pass?"border-red-500":"border-gray-700"} rounded bg-gray-900 text-white`}),i.pass&&a.jsx("div",{className:"text-red-400 text-xs mb-2",children:i.pass}),i.common&&a.jsx("div",{className:"text-red-400 text-xs mb-2 text-center",children:i.common}),a.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-bold transition",children:"Войти"})]})})});export{se as default};
